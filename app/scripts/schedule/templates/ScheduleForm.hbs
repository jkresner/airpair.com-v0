{{!-- todo use bootstrap styles, error classes, backbone validation --}}
<div class="form-actions admin-nav">
  <a class="btn" href="/adm/inbound/request/{{requestId}}">Back</a>
</div>
<h2>Schedule a Call</h2>
<fieldset>
  <div class="alert alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <h4>Error</h4>
  </div>

  <h4>Experts</h4>
  {{#each available}}
    {{#with expert}}
    <label {{#if selected}}class="selected"{{/if}}>
      <img src="{{pic}}" alt="{{name}}" draggable="false">
      <br />
      <input type="radio" value="{{_id}}" name="expertId" {{#if selected}} checked{{/if}}/>
      {{name}}
      <span class="balance" title="hours balance">{{balance.total}}</span>
    </label>
    {{/with}}
  {{else}}
    <p>No experts are <code>available</code></p>
  {{/each}}

  {{#selectedExpert}}

    <div class="control-group">
      <label class="control-label" for="type">Type</label>
      <div class="controls">
        <select name="type">
          {{#each balance.byTypeArray}}
          <option>{{type}}</option>
          {{/each}}
        </select>
      </div>
    </div>

    <div class="control-group">
      <label class="control-label" for="duration">Duration</label>
      <div class="controls">
        <select name="duration">
          {{#each selectOptions }}
            <option value="{{num}}">{{num}} hour(s)</option>
          {{else}}
            <option disabled>0 hours available for this expert</option>
          {{/each}}
        </select>
      </div>
    </div>

    <div class="control-group">
      <label class="control-label" for="date">Date &amp; Time &amp; Timezone</label>
      <div class="controls">
        <input name="date" type="text" placeholder="e.g. Dec 9th 3pm">
        <select name="timezone" class="input-mini">
          <option value="PST" selected>PST</option>
          <option value="EDT">EDT</option>
        </select>
      </div>
      <div id="calendarLink"></div>
    </div>

  {{/selectedExpert}}


  <div class="form-actions">
    {{!-- TODO this should take you back to the inbound view page --}}
    <button id="create" class="save button">+ Create Call</button>
  </div>
</fieldset>
